<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X O Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"
        defer></script>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container">
        <div class="row" id="gameGrid">
            <!-- Dynamically generated grid will go here -->
        </div>
    </div>

    <script>
        // Function to generate the game grid dynamically
        function generateGameGrid() {
            let grid = '';
            const rows = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];

            rows.forEach(row => {
                grid += `<div class="col-3 m-1 bg-warning border-black">`;
                for (let i = 1; i <= 9; i++) {
                    grid += `
                        <div class="row d-flex justify-content-between gap-1 m-auto">
                            <div class="col-3 my-2 bg-success">
                                <div class="a" id="${row}${i}" onclick="insert_X_Y(this.id)">${row}${i}</div>
                            </div>
                        </div>
                    `;
                }
                grid += `</div>`;
            });

            document.getElementById('gameGrid').innerHTML = grid;
        }

        // Call the function to generate the grid when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            generateGameGrid();
        });

        let turn = true;

        function checkWinner() {
            const winningCombinations = [
                ['A1', 'A2', 'A3'], ['A1', 'A4', 'A7'], ['A1', 'A5', 'A9'],
                ['A2', 'A5', 'A8'], ['A3', 'A6', 'A9'], ['A3', 'A5', 'A7'],
                ['B1', 'B2', 'B3'], ['B1', 'B4', 'B7'], ['B2', 'B5', 'B8'],
                ['B3', 'B6', 'B9'], ['B3', 'B5', 'B7'],
                ['C1', 'C2', 'C3'], ['C1', 'C4', 'C7'], ['C1', 'C5', 'C9'],
                ['C2', 'C5', 'C8'], ['C3', 'C6', 'C9'], ['C3', 'C5', 'C7'],
                ['D1', 'D2', 'D3'], ['D1', 'D4', 'D7'], ['D1', 'D5', 'D9'],
                ['D2', 'D5', 'D8'], ['D3', 'D6', 'D9'], ['D3', 'D5', 'D7'],
                ['E1', 'E2', 'E3'], ['E1', 'E4', 'E7'], ['E1', 'E5', 'E9'],
                ['E2', 'E5', 'E8'], ['E3', 'E6', 'E9'], ['E3', 'E5', 'E7'],
                ['F1', 'F2', 'F3'], ['F1', 'F4', 'F7'], ['F1', 'F5', 'F9'],
                ['F2', 'F5', 'F8'], ['F3', 'F6', 'F9'], ['F3', 'F5', 'F7'],
                ['G1', 'G2', 'G3'], ['G1', 'G4', 'G7'], ['G1', 'G5', 'G9'],
                ['G2', 'G5', 'G8'], ['G3', 'G6', 'G9'], ['G3', 'G5', 'G7'],
                ['H1', 'H2', 'H3'], ['H1', 'H4', 'H7'], ['H1', 'H5', 'H9'],
                ['H2', 'H5', 'H8'], ['H3', 'H6', 'H9'], ['H3', 'H5', 'H7'],
                ['I1', 'I2', 'I3'], ['I1', 'I4', 'I7'], ['I1', 'I5', 'I9'],
                ['I2', 'I5', 'I8'], ['I3', 'I6', 'I9'], ['I3', 'I5', 'I7']
            ];

            for (let combination of winningCombinations) {
                let [a, b, c] = combination;
                let cellA = document.getElementById(a).innerHTML;
                let cellB = document.getElementById(b).innerHTML;
                let cellC = document.getElementById(c).innerHTML;

                if (cellA !== '' && cellA === cellB && cellA === cellC) {
                    alert(`Winner: ${cellA}`);
                    return true;
                }
            }

            return false;
        }

        function insert_X_Y(id) {
            let element = document.getElementById(id);
            if (turn && element.innerHTML == '') {
                element.innerHTML = 'X';
                turn = !turn;
            } else if (!turn && element.innerHTML == '') {
                element.innerHTML = 'O';
                turn = !turn;
            }
            if (checkWinner()) {
                resetGame();
            }
        }

        function resetGame() {
            // Reset all cells to empty
            const cells = document.getElementsByClassName('a');
            Array.from(cells).forEach(cell => {
                cell.innerHTML = '';
            });
            turn = true;
        }
    </script>
</body>

</html>